================================================
 MediaWiki Extension: EditWarning
================================================

Author: Thomas David (ThomasDavid@gmx.de)
Version: 0.4-alpha
Date: 2009-04-07
Licence: GNU GPL 2.0 or later

If the user opens a page for editing which is being edited by another user
at the same time this extension displays a warning on the editing page.

Notice: It's not recommended to use this extension if anonymous users
are allowed to edit pages, because it ignores anonymous page edits.

Notice: This is an alpha release. While you're encouraged to test it and
report bugs and problems, it's not recommended to use it on productive
MediaWiki installations. It could kill sweet little bunnies, I warned you! :) 

===== Installation =====

1.) Move the folder "EditWarning" to the "extensions" folder of your
    MediaWiki installation.

2.) Execute the following SQL statements in your MediaWiki database:

CREATE TABLE IF NOT EXISTS "editwarning_locks" (
  "user_id" int(10) unsigned NOT NULL,
  "user_name" varchar(255) NOT NULL,
  "article_id" int(10) unsigned NOT NULL,
  "timestamp" int(11) unsigned NOT NULL,
  "section" int(2) unsigned NOT NULL,
  KEY "user_id" ("user_id"),
  KEY "article_id" ("article_id")
);

ALTER TABLE `editwarning_locks`
  ADD CONSTRAINT "editwarning_locks_ibfk_1" FOREIGN KEY ("user_id") REFERENCES "user" ("user_id") ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT "editwarning_locks_ibfk_2" FOREIGN KEY ("article_id") REFERENCES "page" ("page_id") ON DELETE CASCADE ON UPDATE CASCADE;

3.) Add this line to your LocalSettings.php:

require_once("$IP/extensions/EditWarning/EditWarning.php");

4.) Open the file includes/EditPage.php of your MediaWiki installation
    and search for the line:

<span class='editHelp'>{$cancel} | {$edithelp}</span>

    Replace that line with:

<span class='editHelp'>{$edithelp}</span>

5.) Optional: The default timeout is set to 10 minutes. If you want to change
              this setting, add this line to your LocalSettings.php
              (Note: The value is the number of minutes):

$EditWarning_Timeout = 5;

Optional: The extension hides everything except the editor area. If you don't
like this behavior, add this line to your LocalSettings.php:

$EditWarning_OnlyEditor = "false";
